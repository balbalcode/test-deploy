import{_ as f,x as r,p as h,z as g,B as y,c as _,o as c,w,q as v,b as E,h as B,d as L}from"./index-DhToL83V.js";import{L as b}from"./main-CitQvmgb.js";import"./useUtility-B4DnbHAI.js";import"./useAcl-o_HAXGgX.js";const x={key:0,class:"legacy-loader"},i="legacy-harbor-root",I={__name:"default",setup(k){const n=v();let e=null;const l=r(!0),m=r(0);function u(){const t=document.getElementById(i);t.innerHTML?e.contentWindow.postMessage({type:"menu-linked",payload:{path:n.fullPath},mode:"DEV"},"http://localhost:8002"):(e=document.createElement("iframe"),e.style.width="100%",e.style.minHeight="90vh",e.src=`http://localhost:8002${n.fullPath}`,t.appendChild(e)),l.value=!1}async function d(){{u();return}}h(()=>{d(),window.addEventListener("modal-opened",()=>{s()}),window.addEventListener("modal-closed",()=>{document.body.style.height=`${parseInt(m.value)}px`})}),g(()=>n.fullPath,()=>{d()});function s(){setTimeout(()=>{const t=document.getElementsByClassName("modal-dialog"),o=document.getElementById(i);for(let p of t){let a=p.parentElement;a=a.parentElement,o&&a&&o.appendChild(a)}},500)}return y(()=>{window.removeEventListener("modal-opened",()=>{s()})}),(t,o)=>(c(),_(b,null,{default:w(()=>[l.value?(c(),E("div",x,"Loading legacy module...")):B("",!0),o[0]||(o[0]=L("div",{id:"legacy-harbor-root",class:"rounded-1 overflow-hidden"},null,-1))]),_:1}))}},H=f(I,[["__scopeId","data-v-bfb2a4bb"]]);export{H as default};
