(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{919:function(t,e,r){"use strict";r.r(e);r(58);var n,o=r(1),d=(r(12),r(59),r(90),r(9),r(41),r(25),r(458)),l={components:(n={DropdownButton:function(){return r.e(15).then(r.bind(null,893))},ModalConfirmation:function(){return r.e(23).then(r.bind(null,894))},ActiveButton:function(){return r.e(0).then(r.bind(null,885))},ContentTableView:function(){return r.e(21).then(r.bind(null,895))},PriceLabel:function(){return r.e(20).then(r.bind(null,896))}},n.ActiveButton=function(){return r.e(0).then(r.bind(null,885))},n.CardPaginationView=function(){return r.e(18).then(r.bind(null,897))},n),props:{is_searching:{default:!1},filter:{default:function(){return{}}},selected:{default:function(){return{}}}},data:function(){return{id:"table-driver",data:[],selected_id:"",modal:{modal_delete:!1},helper:{CORPORATE:{},is_loading:!1,is_error:!1},pagination:{per_page:10,current_page:1,total_data:10}}},watch:{is_searching:{handler:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=1;break}return r.next=1,e.passUpdatePagination(1);case 1:case"end":return r.stop()}},r)}))()}}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.helper.CORPORATE=JSON.parse(t.$utility.getCookie("corporate")),e.next=1,t.processGetData();case 1:case"end":return e.stop()}},e)}))()},methods:{getCorporateDriver:d.driverMethods.getCorporateDriver,deleteCorporateDriver:d.driverMethods.deleteCorporateDriver,passErrorToParent:function(t){this.$emit("error",{state:!0,message:t})},passEditToParent:function(data){this.$emit("edit",data)},passCancelDeleteToParent:function(){this.modal.modal_delete=!1,this.$emit("cancel")},passDeleteToParent:function(data){this.$emit("delete",data)},toggleModalDelete:function(){this.modal.modal_delete=!this.modal.modal_delete},passUpdatePagination:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e.pagination.current_page=t,r.next=1,e.processGetData();case 1:case"end":return r.stop()}},r)}))()},setPayloadGet:function(){var t={filter:[{key:"corporate_id",value:this.helper.CORPORATE.id}],pagination:{current_page:this.pagination.current_page,per_page:this.pagination.per_page}};return this.filter.name&&t.filter.push({key:"name",value:this.filter.name}),t},setPayloadDelete:function(){return{id:this.selected.id}},processGetData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var r,data,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.helper.is_error=!1,t.helper.is_loading=!0,e.prev=1,r=t.setPayloadGet(),e.next=2,t.getCorporateDriver(r);case 2:data=e.sent,t.data=data.values,t.pagination.total_data=data.total_values,e.next=4;break;case 3:e.prev=3,n=e.catch(1),console.log(n),t.data=[],t.pagination.total_data=0,t.helper.is_error=!0,t.passErrorToParent(n),t.$utility.setErrorContextSentry(n),t.$sentry.captureMessage(n.message+" at processGetData in TableCorporateDriver");case 4:t.$emit("ready"),t.helper.is_loading=!1;case 5:case"end":return e.stop()}},e,null,[[1,3]])}))()},processDeleteData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.helper.is_loading=!0,e.prev=1,r=t.setPayloadDelete(),e.next=2,t.deleteCorporateDriver(r);case 2:t.modal.modal_delete=!1,t.processGetData(),e.next=4;break;case 3:e.prev=3,n=e.catch(1),t.passErrorToParent(n),t.$utility.setErrorContextSentry(n),t.$sentry.captureMessage(n.message+" at processDeleteData in TableCorporateDriver");case 4:t.helper.is_loading=!1;case 5:case"end":return e.stop()}},e,null,[[1,3]])}))()}}},c=r(38),component=Object(c.a)(l,function(){var t=this,e=t._self._c;return e("div",[e("content-table-view",{attrs:{length:t.pagination.total_data,is_loading:t.helper.is_loading,is_error:t.helper.is_error,id:"wrapper__"+t.id,test_id:"wrapper__"+t.id}},[e("div",{staticClass:"table-responsive rounded-top table-freeze mb-0"},[e("table",{staticClass:"table table-striped table-borderless mb-0 custom-tbl",attrs:{"data-testid":t.id}},[e("thead",{staticClass:"thead-freeze bg-gray-70"},[e("tr",{staticClass:"border-bottom-table"},[e("th",{staticClass:"text-dark",attrs:{"data-testid":t.id+"__th-no"}},[t._v("No")]),t._v(" "),e("th",{staticClass:"text-dark",attrs:{"data-testid":t.id+"__th-name"}},[t._v("Nama")]),t._v(" "),e("th",{staticClass:"text-dark",attrs:{"data-testid":t.id+"__th-nik"}},[t._v("NIK")]),t._v(" "),e("th",{staticClass:"text-dark",attrs:{"data-testid":t.id+"__th-phone"}},[t._v("\n              No Telp\n            ")]),t._v(" "),e("th",{staticClass:"text-dark",attrs:{"data-testid":t.id+"__th-option"}},[t._v("Opsi")])])]),t._v(" "),e("tbody",t._l(t.data,function(r,n){return e("tr",{key:"driver-"+n,class:{"selected-row":t.selected.id===r.id}},[e("td",{attrs:{"data-testid":t.id+"__tr-"+n+"__td-no"}},[t._v("\n              "+t._s(n+10*(t.pagination.current_page-1)+1)+"\n            ")]),t._v(" "),e("td",{attrs:{"data-testid":t.id+"__tr-"+n+"__td-name"}},[t._v("\n              "+t._s(r.name)+"\n            ")]),t._v(" "),e("td",{attrs:{"data-testid":t.id+"__tr-"+n+"__td-nik"}},[t._v("\n              "+t._s(r.nik)+"\n            ")]),t._v(" "),e("td",{attrs:{"data-testid":t.id+"__tr-"+n+"__td-phone"}},[t._v("\n              "+t._s(r.phone)+"\n            ")]),t._v(" "),e("td",{staticClass:"text-center",attrs:{"data-testid":t.id+"__tr-"+n+"__td-option"}},[e("dropdown-button",{ref:"btn-action-"+n,refInFor:!0,attrs:{text:"",size:"sm",variant:"gray",type:"outline",additional_class:"p-0",id:"btn_action_"+n,caret:"font-size-20 bx bx-dots-vertical-rounded",has_custom_action:!0,test_id:t.id+"__tr-"+n+"__btn-option"}},[e("active-button",{attrs:{icon:"bx bx-pencil",icon_size:"16",icon_color:"text-dark",text:"Edit akun",additional_class:"border-0 w-100 text-left  p-2 bg-transparent",align:"rtl",id:t.id+"__tr-"+n+"__btn-edit",test_id:t.id+"__tr-"+n+"__btn-edit"},on:{click:function(e){return t.passEditToParent(r)}}}),t._v(" "),e("active-button",{attrs:{icon:"bx bx-trash",icon_size:"16",icon_color:"text-danger",text_color:"text-danger",text:"Hapus akun",additional_class:"border-0 w-100 text-left  p-2 bg-transparent",align:"rtl",id:t.id+"__tr-"+n+"__btn-delete",test_id:t.id+"__tr-"+n+"__btn-delete"},on:{click:function(e){return t.passDeleteToParent(r)}}})],1)],1)])}),0)])]),t._v(" "),e("div",{staticClass:"w-100"},[e("div",{staticClass:"col-12 text-center text-lg-right"},[e("card-pagination-view",{attrs:{per_page:t.pagination.per_page,total_data:t.pagination.total_data,additional_class:"mt-3",current_page:t.pagination.current_page,id:"pagination_corporate",test_id:t.id+"__pagination"},on:{update:t.passUpdatePagination}})],1)])]),t._v(" "),e("modal-confirmation",{attrs:{is_loading:t.helper.is_loading,text:"Apakah anda yakin untuk menghapus akun driver ini?",submit_button_text:"Submit"},on:{cancel:t.passCancelDeleteToParent,submit:t.processDeleteData},model:{value:t.modal.modal_delete,callback:function(e){t.$set(t.modal,"modal_delete",e)},expression:"modal.modal_delete"}})],1)},[],!1,null,null,null);e.default=component.exports}}]);