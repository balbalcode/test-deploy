(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{643:function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"b",function(){return l});var r=n(49),o=n(780);const c="7";function d(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function h(t,e={}){const n="string"==typeof e?e:e.tunnel,o="string"!=typeof e&&e._metadata?e._metadata.sdk:void 0;return n||`${function(t){return`${d(t)}${t.projectId}/envelope/`}(t)}?${function(t,e){return Object(r.h)({sentry_key:t.publicKey,sentry_version:c,...e&&{sentry_client:`${e.name}/${e.version}`}})}(t,o)}`}function l(t,e){const n=Object(o.c)(t);if(!n)return"";const r=`${d(n)}embed/error-page/`;let c=`dsn=${Object(o.b)(n)}`;for(const t in e)if("dsn"!==t&&"onClose"!==t)if("user"===t){const t=e.user;if(!t)continue;t.name&&(c+=`&name=${encodeURIComponent(t.name)}`),t.email&&(c+=`&email=${encodeURIComponent(t.email)}`)}else c+=`&${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`;return`${r}?${c}`}},656:function(t,e,n){"use strict";n.d(e,"a",function(){return P}),n.d(e,"b",function(){return D});var r=n(780),o=n(26),c=n(17),d=n(18),h=n(581),l=n(779),_=n(778),f=n(643),v=n(43),m=n(657),O=n(162),E=n(21),k=n(623),j=n(781),y=n(56),w=n(211),$=n(215);const I="Not capturing exception because it's already been captured.";class P{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Object(r.c)(t.dsn):v.a&&o.c.warn("No DSN provided, client will not send events."),this._dsn){const e=Object(f.a)(this._dsn,t);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:e})}}captureException(t,e,n){if(Object(c.d)(t))return void(v.a&&o.c.log(I));let r=e&&e.event_id;return this._process(this.eventFromException(t,e).then(t=>this._captureEvent(t,e,n)).then(t=>{r=t})),r}captureMessage(t,e,n,r){let o=n&&n.event_id;const c=Object(d.i)(t)?t:String(t),h=Object(d.k)(t)?this.eventFromMessage(c,e,n):this.eventFromException(t,n);return this._process(h.then(t=>this._captureEvent(t,n,r)).then(t=>{o=t})),o}captureEvent(t,e,n){if(e&&e.originalException&&Object(c.d)(e.originalException))return void(v.a&&o.c.log(I));let r=e&&e.event_id;const d=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,e,d||n).then(t=>{r=t})),r}captureSession(t){"string"!=typeof t.release?v.a&&o.c.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),Object(y.c)(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const e=this._transport;return e?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then(n=>e.flush(t).then(t=>n&&t))):Object(h.c)(!0)}close(t){return this.flush(t).then(t=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),t))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(t){return this.getIntegrationByName(t)}getIntegrationByName(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch(e){return v.a&&o.c.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){const e=this._integrations[t.name];Object(k.f)(this,t,this._integrations),e||Object(k.b)(this,[t])}sendEvent(t,e={}){this.emit("beforeSendEvent",t,e);let n=Object(m.a)(t,this._dsn,this._options._metadata,this._options.tunnel);for(const t of e.attachments||[])n=Object(l.a)(n,Object(l.b)(t,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then(e=>this.emit("afterSendEvent",t,e),null)}sendSession(t){const e=Object(m.b)(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}recordDroppedEvent(t,e,n){if(this._options.sendClientReports){const r="number"==typeof n?n:1,c=`${t}:${e}`;v.a&&o.c.log(`Recording outcome: "${c}"${r>1?` (${r} times)`:""}`),this._outcomes[c]=(this._outcomes[c]||0)+r}}captureAggregateMetrics(t){v.a&&o.c.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const e=Object(j.a)(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(e)}on(t,e){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(e)}emit(t,...e){this._hooks[t]&&this._hooks[t].forEach(t=>t(...e))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=Object(k.g)(this,t),Object(k.b)(this,t),this._integrationsInitialized=!0}_updateSessionFromEvent(t,e){let n=!1,r=!1;const o=e.exception&&e.exception.values;if(o){r=!0;for(const t of o){const e=t.mechanism;if(e&&!1===e.handled){n=!0;break}}}const c="ok"===t.status;(c&&0===t.errors||c&&n)&&(Object(y.c)(t,{...n&&{status:"crashed"},errors:t.errors||Number(r||n)}),this.captureSession(t))}_isClientDoneProcessing(t){return new h.a(e=>{let n=0;const r=setInterval(()=>{0==this._numProcessing?(clearInterval(r),e(!0)):(n+=1,t&&n>=t&&(clearInterval(r),e(!1)))},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(t,e,n,r=Object(E.e)()){const o=this.getOptions(),c=Object.keys(this._integrations);return!e.integrations&&c.length>0&&(e.integrations=c),this.emit("preprocessEvent",t,e),Object($.b)(o,t,e,n,this,r).then(t=>{if(null===t)return t;const e={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(t.contexts&&t.contexts.trace)&&e){const{traceId:r,spanId:o,parentSpanId:c,dsc:d}=e;t.contexts={trace:{trace_id:r,span_id:o,parent_span_id:c},...t.contexts};const h=d||Object(w.a)(r,this,n);t.sdkProcessingMetadata={dynamicSamplingContext:h,...t.sdkProcessingMetadata}}return t})}_captureEvent(t,e={},n){return this._processEvent(t,e,n).then(t=>t.event_id,t=>{if(v.a){const e=t;"log"===e.logLevel?o.c.log(e.message):o.c.warn(e)}})}_processEvent(t,e,n){const r=this.getOptions(),{sampleRate:o}=r,c=x(t),l=S(t),f=t.type||"error",v=`before send for type \`${f}\``;if(l&&"number"==typeof o&&Math.random()>o)return this.recordDroppedEvent("sample_rate","error",t),Object(h.b)(new _.a(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const m="replay_event"===f?"replay":f,O=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,e,n,O).then(n=>{if(null===n)throw this.recordDroppedEvent("event_processor",m,t),new _.a("An event processor returned `null`, will not send event.","log");if(e.data&&!0===e.data.__sentry__)return n;const o=function(t,e,n){const{beforeSend:r,beforeSendTransaction:o}=t;if(S(e)&&r)return r(e,n);if(x(e)&&o){if(e.spans){const t=e.spans.length;e.sdkProcessingMetadata={...e.sdkProcessingMetadata,spanCountBeforeProcessing:t}}return o(e,n)}return e}(r,n,e);return function(t,e){const n=`${e} must return \`null\` or a valid event.`;if(Object(d.o)(t))return t.then(t=>{if(!Object(d.j)(t)&&null!==t)throw new _.a(n);return t},t=>{throw new _.a(`${e} rejected with ${t}`)});if(!Object(d.j)(t)&&null!==t)throw new _.a(n);return t}(o,v)}).then(r=>{if(null===r){if(this.recordDroppedEvent("before_send",m,t),c){const e=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",e)}throw new _.a(`${v} returned \`null\`, will not send event.`,"log")}const o=n&&n.getSession();if(!c&&o&&this._updateSessionFromEvent(o,r),c){const t=(r.sdkProcessingMetadata&&r.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(r.spans?r.spans.length:0);t>0&&this.recordDroppedEvent("before_send","span",t)}const d=r.transaction_info;if(c&&d&&r.transaction!==t.transaction){const source="custom";r.transaction_info={...d,source:source}}return this.sendEvent(r,e),r}).then(null,t=>{if(t instanceof _.a)throw t;throw this.captureException(t,{data:{__sentry__:!0},originalException:t}),new _.a(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)})}_process(t){this._numProcessing++,t.then(t=>(this._numProcessing--,t),t=>(this._numProcessing--,t))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,t=>{v.a&&o.c.error("Error while sending event:",t)});v.a&&o.c.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map(e=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t[e]}})}}function S(t){return void 0===t.type}function x(t){return"transaction"===t.type}function D(t){const e=Object(O.k)();e&&e.addEventProcessor&&e.addEventProcessor(t)}},657:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return c});var r=n(779),o=n(780);function c(t,e,n,c){const d=Object(r.h)(n),h={sent_at:(new Date).toISOString(),...d&&{sdk:d},...!!c&&e&&{dsn:Object(o.b)(e)}},l="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return Object(r.c)(h,[l])}function d(t,e,n,o){const c=Object(r.h)(n),d=t.type&&"replay_event"!==t.type?t.type:"event";!function(t,e){e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]])}(t,n&&n.sdk);const h=Object(r.d)(t,c,o,e);delete t.sdkProcessingMetadata;const l=[{type:d},t];return Object(r.c)(h,[l])}},682:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n(780),o=n(49),c=n(779);function d(t,e,n,d,h){const l={sent_at:(new Date).toISOString()};n&&n.sdk&&(l.sdk={name:n.sdk.name,version:n.sdk.version}),d&&h&&(l.dsn=Object(r.b)(h)),e&&(l.trace=Object(o.c)(e));const _=function(t){return[{type:"check_in"},t]}(t);return Object(c.c)(l,[_])}}}]);