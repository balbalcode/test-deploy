(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{918:function(t,e,n){"use strict";n.r(e);n(127),n(69),n(42),n(58),n(9),n(50);var o=n(1),r=(n(12),n(166),n(164),n(90),n(165),n(41),n(25),n(431)),c=n(751),l=n(701),d=n.n(l),v={data:function(){return{data:{},container:[],helper:{subTotal:0,serviceTax:0,serviceFee:0,total:0,CORPORATE:{},isLoading:!1}}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.helper.CORPORATE=JSON.parse(t.$utility.getCookie("corporate")),e.next=1,t.processGetCorporate();case 1:t.processGetInvoice();case 2:case"end":return e.stop()}},e)}))()},methods:{getCorporateDetail:r.subscriptionMethods.getCorporateDetail,getCorporateTransactionDetail:r.transactionMethods.getCorporateTransactionDetail,setPayloadGet:function(){return{id:this.$route.query.id}},processGetInvoice:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.helper.isLoading=!0,n=t.setPayloadGet(),e.next=1,t.getCorporateTransactionDetail(n);case 1:t.data=e.sent,t.processDataContainer(t.data.item_transactions),t.helper.isLoading=!1,e.next=3;break;case 2:e.prev=2,o=e.catch(0),t.helper.isLoading=!1,t.helper.isError=!0,t.$utility.setErrorContextSentry(o),t.$sentry.captureMessage(o.message+" at processGetInvoice in transaction/detail");case 3:case"end":return e.stop()}},e,null,[[0,2]])}))()},toggleDetailService:function(t){this.container[""+t].isOpen=!this.container[""+t].isOpen},processDataContainer:function(t){var e=this;t.map(function(t){if(e.container.map(function(t){return t.container_code}).indexOf(t.transaction_data.container_code)>-1){var n=e.container.map(function(t){return t.container_code}).indexOf(t.transaction_data.container_code);e.container[""+n].data.push(t),e.container[""+n].total+=parseInt(t.price)}else e.container.push({container_code:t.transaction_data.container_code,data:[t],total:parseInt(t.price),isOpen:!1})}),this.helper.subTotal=parseInt(this.container.reduce(function(t,e){return t+e.total},0)),this.helper.serviceTax=parseInt(.11*this.helper.subTotal),this.helper.serviceFee=1e5*this.container.length,this.helper.total=parseInt(this.helper.CORPORATE.admin_charge)+parseInt(this.helper.subTotal)+parseInt(this.helper.serviceTax)+parseInt(this.helper.serviceFee)},processGetCorporate:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var n,data,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.helper.isLoading=!0,t.helper.isError=!1,e.prev=1,n={id:t.helper.CORPORATE.id},e.next=2,t.getCorporateDetail(n);case 2:data=e.sent,t.helper.CORPORATE=Object.assign({},data,{service_fee:1e5}),t.helper.isLoading=!1,e.next=4;break;case 3:e.prev=3,o=e.catch(1),t.helper.isError=!0,t.passErrorToParent(o),t.$utility.setErrorContextSentry(o),t.$sentry.captureMessage(o.message+" at processGetCorporate in FormPaymentMethod"),t.helper.isLoading=!1;case 4:case"end":return e.stop()}},e,null,[[1,3]])}))()},exportPdf:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark(function e(){var n,canvas,o,r,l,v,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.helper.isLoading=!0,e.next=1;break;case 1:return n=document.querySelector("#invoice-body"),e.next=2,d()(n,{scale:2});case 2:canvas=e.sent,o=canvas.toDataURL("image/png"),r=new c.a({orientation:"p",unit:"mm",format:"a4"}),l=r.internal.pageSize.getWidth(),r.internal.pageSize.getHeight(),v=l,m=canvas.height*v/canvas.width,r.addImage(o,"PNG",0,0,v,m,void 0,"FAST"),r.save("invoice.pdf"),t.helper.isLoading=!1;case 3:case"end":return e.stop()}},e)}))()}},components:{Layout:function(){return Promise.resolve().then(n.bind(null,156))},SquareCard:function(){return n.e(3).then(n.bind(null,887))},ActiveButton:function(){return n.e(0).then(n.bind(null,885))},ContentSpan:function(){return n.e(10).then(n.bind(null,888))},ContentTitle:function(){return n.e(9).then(n.bind(null,890))},ContentDivider:function(){return n.e(13).then(n.bind(null,891))}}},m=n(38),component=Object(m.a)(v,function(){var t=this,e=t._self._c;return e("div",{staticClass:"font-size-13"},[e("div",{staticClass:"w-100"},[t.data.id&&!t.helper.isLoading?e("div",{staticClass:"bg-white rounded-lg shadow p-3 mt-3",attrs:{id:"invoice-body"}},[e("div",{staticClass:"row"},[t._m(0),t._v(" "),e("div",{staticClass:"col-12 col-sm-9"},[e("p",{staticClass:"my-0 font-size-20 font-weight-bold"},[t._v("\n            Pesanan #"+t._s(t.data.id.substr(0,8))+"\n          ")]),t._v(" "),e("p",{staticClass:"my-0 text-muted"},[t._v("\n            "+t._s(t.helper.CORPORATE.pic_name)+" -\n            "+t._s(t.helper.CORPORATE.pic_phone_number)+"\n          ")]),t._v(" "),e("p",{staticClass:"my-0 text-muted"},[t._v("\n            "+t._s(t.helper.CORPORATE.address)+"\n          ")])]),t._v(" "),e("div",{staticClass:"col-12 col-sm-2 pt-3 text-right"},[e("active-button",{attrs:{align:"rtl",icon:"bx bx-show",text:"Lihat Invoice",additional_class:"px-3 rounded-pill"},on:{click:function(e){return t.$router.push("/transaction/invoice?id="+t.$route.query.id)}}})],1),t._v(" "),e("div",{staticClass:"col-12 my-2"}),t._v(" "),e("div",{staticClass:"col-12 col-sm-3 my-2"},[e("p",{staticClass:"my-1 text-muted"},[t._v("Nomor Invoice")]),t._v(" "),e("p",{staticClass:"my-1 font-weight-bold font-size-16 text-muted"},[t._v("\n            #"+t._s(t.data.id)+"\n          ")])]),t._v(" "),e("div",{staticClass:"col-12 col-sm-3 my-2"},[e("p",{staticClass:"my-1 text-muted"},[t._v("Tanggal Pemesanan")]),t._v(" "),e("p",{staticClass:"my-1 font-weight-bold font-size-16 text-muted"},[t._v("\n            "+t._s(t.$utility.momentAddDate(t.data.created_at,"7","hour","DD/MM/YYYY HH:mm:ss"))+"\n          ")])]),t._v(" "),e("div",{staticClass:"col-12 col-sm-3 my-2"},[e("p",{staticClass:"my-1 text-muted"},[t._v("Tanggal Pembayaran")]),t._v(" "),t.data.paid_at?e("p",{staticClass:"my-1 font-weight-bold font-size-16 text-muted"},[t._v("\n            "+t._s(t.$utility.momentAddDate(t.data.created_at,"7","hour","DD/MM/YYYY HH:mm:ss"))+"\n          ")]):e("p",{staticClass:"my-1 font-weight-bold font-size-16 text-muted"},[t._v("\n            INVOICE BELUM DIBAYAR\n          ")])]),t._v(" "),e("div",{staticClass:"col-12 col-sm-3 my-2"},[e("p",{staticClass:"my-1 text-muted"},[t._v("Status Pembayaran")]),t._v(" "),e("p",{staticClass:"my-1 font-weight-bold font-size-16 text-muted"},[e("span",{staticClass:"badge p-2 rounded-pill",style:"\n                  color: "+(t.data.paid_at?"#027A48":"#B93815")+" !important;\n                  background: "+(t.data.paid_at?"#ECFDF3":"#FFF4ED")+" !important"},[t._v("\n              "+t._s(t.data.paid_at?"Sudah dibayar":"Belum dibayar")+"\n            ")])])]),t._v(" "),e("div",{staticClass:"col-12 col-sm-3 my-2"},[e("p",{staticClass:"my-1 text-muted"},[t._v("Total Kontainer")]),t._v(" "),e("p",{staticClass:"my-1 font-weight-bold font-size-16 text-muted"},[t._v("\n            "+t._s(t.data.item_transactions.length)+"\n          ")])]),t._v(" "),e("div",{staticClass:"col-12 col-sm-3 my-2"},[e("p",{staticClass:"my-1 text-muted"},[t._v("Customer")]),t._v(" "),e("p",{staticClass:"my-1 font-weight-bold font-size-16 text-muted"},[t._v("\n            "+t._s(t.helper.CORPORATE.name)+"\n          ")])]),t._v(" "),e("div",{staticClass:"col-12 col-sm-6 my-2"},[e("p",{staticClass:"my-1 text-muted"},[t._v("Dibuat Oleh")]),t._v(" "),e("p",{staticClass:"my-1 font-weight-bold font-size-16 text-muted"},[t._v("\n            "+t._s(t.helper.CORPORATE.pic_name)+" -\n            "+t._s(t.helper.CORPORATE.pic_phone_number)+"\n          ")])])]),t._v(" "),e("div",{staticClass:"my-3"},[e("p",{staticClass:"my-0 font-size-16 font-weight-bold"},[t._v("\n          Kontainer dan Layanan\n        ")]),t._v(" "),t._l(t.container,function(content,n){return e("div",{key:"content-"+n,staticClass:"rounded-lg border p-3 my-2"},[e("div",{staticClass:"d-flex justify-content-between"},[e("div",{staticClass:"flex-grow-1"},[e("p",{staticClass:"my-0 font-weight-bold font-size-14"},[t._v("\n                "+t._s(content.data[0].transaction_data.container_code)+"\n              ")]),t._v(" "),e("p",{staticClass:"font-size-12"},[e("span",{staticClass:"text-muted"},[t._v("Tipe: ")]),t._v(" "),e("span",{},[t._v("\n                  "+t._s(content.data[0].transaction_data.vehicle_type)+"\n                ")]),t._v("\n                | "),e("span",{staticClass:"text-muted"},[t._v("Jenis: ")]),t._v(" "),e("span",{},[t._v("\n                  "+t._s(content.data[0].transaction_data.vehicle_size)+"\n                ")]),t._v("\n                | "),e("span",{staticClass:"text-muted"},[t._v("Jenis: ")]),t._v(" "),e("span",{},[t._v("\n                  "+t._s("FILL"===content.data[0].transaction_data.container_fill?"Muatan Terisi":"Muatan Kosong")+"\n                ")])])]),t._v(" "),e("div",{staticClass:"text-lg-right"},[e("p",{staticClass:"my-0 font-weight-bold font-size-14"},[content.data.length<2?e("span",[t._v("\n                  "+t._s(content.data[0].product_detail.name)+"\n                ")]):e("span",[t._v("\n                  "+t._s(content.data.length)+" produk\n                  "),e("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"bx bx-error-circle",attrs:{title:content.data.map(function(t){return t.product_detail.name}).join(" + ")}})])]),t._v(" "),e("p",{staticClass:"font-size-12"},[e("span",{staticClass:"text-muted"},[t._v("Rp"+t._s(t.$utility.convertToRupiah(content.total))+"\n                ")])])])])])})],2),t._v(" "),e("div",{staticClass:"mt-3"},[e("p",{staticClass:"my-0 font-size-16 font-weight-bold"},[t._v("Informasi Pembayaran")]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 my-3 col-lg-6"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-lg-6 my-1"},[e("p",{staticClass:"my-1 font-size-12 text-muted"},[t._v("Tanggal Pemesanan")]),t._v(" "),e("p",{staticClass:"my-1 font-size-12 font-weight-bold font-size-14 text-muted"},[t._v("\n                  "+t._s(t.$utility.momentAddDate(t.data.created_at,"7","hour","DD/MM/YYYY HH:mm:ss"))+"\n                ")])]),t._v(" "),e("div",{staticClass:"col-12 col-lg-6 my-1"},[e("p",{staticClass:"my-1 font-size-12 text-muted"},[t._v("Tanggal Pembayaran")]),t._v(" "),t.data.paid_at?e("p",{staticClass:"my-1 font-weight-bold font-size-14 text-muted"},[t._v("\n                  "+t._s(t.$utility.momentAddDate(t.data.paid_at,"7","hour","DD/MM/YYYY HH:mm:ss"))+"\n                ")]):e("p",{staticClass:"my-1 font-weight-bold font-size-14 text-muted"},[t._v("\n                  INVOICE BELUM DIBAYAR\n                ")])]),t._v(" "),e("div",{staticClass:"col-12 col-lg-6 my-1"},[e("p",{staticClass:"my-1 font-size-12 text-muted"},[t._v("Metode Pembayaran")]),t._v(" "),e("p",{staticClass:"my-1 font-size-12 font-weight-bold font-size-14 text-muted"},[t._v("\n                  "+t._s(t.data.payment_method.toString().toUpperCase())+"\n                ")])]),t._v(" "),e("div",{staticClass:"col-12 col-lg-6 my-1"},[e("p",{staticClass:"my-1 font-size-12 text-muted"},[t._v("Total Pembayaran")]),t._v(" "),e("p",{staticClass:"my-1 font-size-12 font-weight-bold font-size-14 text-muted"},[t._v("\n                  Rp"+t._s(t.$utility.convertToRupiah(t.helper.total))+"\n                ")])])])]),t._v(" "),e("div",{staticClass:"col-12 my-3 col-lg-6"},[e("div",{staticClass:"bg-light rounded-lg shadow p-3"},[e("div",{staticClass:"d-flex justify-content-between my-2"},[e("div",{staticClass:"font-size-14 text-muted"},[t._v("Sub Total")]),t._v(" "),e("div",{staticClass:"font-size-14 font-weight-bold"},[t._v("\n                  "+t._s(t.$utility.convertToRupiah(t.helper.subTotal))+"\n                ")])]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between my-2"},[e("div",{staticClass:"font-size-14 text-muted"},[t._v("Service Fee")]),t._v(" "),e("div",{staticClass:"font-size-14 font-weight-bold"},[t._v("\n                  "+t._s(t.container.length)+" x\n                  "+t._s(t.$utility.convertToRupiah(t.helper.CORPORATE.service_fee))+"\n                ")])]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between my-2"},[e("div",{staticClass:"font-size-14 text-muted"},[t._v("Service Tax")]),t._v(" "),e("div",{staticClass:"font-size-14 font-weight-bold"},[t._v("\n                  "+t._s(t.$utility.convertToRupiah(t.helper.serviceTax))+"\n                ")])]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between my-2"},[e("div",{staticClass:"font-size-14 text-muted"},[t._v("Biaya Admin")]),t._v(" "),e("div",{staticClass:"font-size-14 font-weight-bold"},[t._v("\n                  "+t._s(t.$utility.convertToRupiah(t.helper.CORPORATE.admin_charge))+"\n                ")])]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between my-3"},[e("div",{staticClass:"font-size-16 font-weight-bold text-muted"},[t._v("\n                  Total Pembayaran\n                ")]),t._v(" "),e("div",{staticClass:"font-size-16 font-weight-bold"},[t._v("\n                  Rp"+t._s(t.$utility.convertToRupiah(t.helper.total))+"\n                ")])])])])])])]):t.helper.isLoading?e("div",{staticClass:"text-center bg-white py-5"},[e("content-span",{attrs:{size:"lg",caption:""}}),t._v(" "),e("h4",{staticClass:"font-weight-bold mt-n4"},[t._v("\n        Kami sedang memproses permintaan anda\n      ")])],1):t.helper.isError?e("div",{staticClass:"text-center bg-white py-5"},[e("content-span",{attrs:{size:"lg",caption:"",image:"error.png"}}),t._v(" "),e("h4",{staticClass:"font-weight-bold mt-n4"},[t._v("\n        Oopss... Kami gagal memproses permintaan anda\n      ")]),t._v(" "),e("active-button",{attrs:{text:"Kembali"},on:{click:function(e){return t.$router.push("/transaction/history")}}})],1):t._e(),t._v(" "),e("div",{staticClass:"w-100 mt-3"},[e("active-button",{attrs:{text:"Download Invoice",is_disabled:t.helper.isLoading,additional_class:"bg-primary text-dark font-weight-bold rounded-lg w-100 p-2 text-center font-weight-bold font-size-16 mt-3 cursor-pointer"},on:{click:t.exportPdf}})],1)])])},[function(){var t=this._self._c;return t("div",{staticClass:"col-12 col-sm-1 pr-0"},[t("img",{staticClass:"img-fluid rounded-lg",attrs:{src:"https://placehold.co/400"}})])}],!1,null,null,null);e.default=component.exports}}]);