(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{922:function(e,t,r){"use strict";r.r(t);r(58);var n,o=r(1),l=(r(10),r(59),r(90),r(9),r(41),r(25),r(432)),d={components:(n={DropdownButton:function(){return r.e(21).then(r.bind(null,896))},ModalConfirmation:function(){return r.e(29).then(r.bind(null,897))},ActiveButton:function(){return r.e(0).then(r.bind(null,888))},ContentTableView:function(){return r.e(27).then(r.bind(null,898))},PriceLabel:function(){return r.e(26).then(r.bind(null,899))}},n.ActiveButton=function(){return r.e(0).then(r.bind(null,888))},n.CardPaginationView=function(){return r.e(24).then(r.bind(null,900))},n),props:{is_searching:{default:!1},filter:{default:function(){return{}}},selected:{default:function(){return{}}}},data:function(){return{id:"table-driver",data:[],selected_id:"",modal:{modal_delete:!1},helper:{CORPORATE:{},is_loading:!1,is_error:!1},pagination:{per_page:10,current_page:1,total_data:10}}},watch:{is_searching:{handler:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e){r.next=1;break}return r.next=1,t.passUpdatePagination(1);case 1:case"end":return r.stop()}},r)}))()}}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.helper.CORPORATE=JSON.parse(e.$utility.getCookie("corporate")),t.next=1,e.processGetData();case 1:case"end":return t.stop()}},t)}))()},methods:{getCorporateDriver:l.driverMethods.getCorporateDriver,deleteCorporateDriver:l.driverMethods.deleteCorporateDriver,passErrorToParent:function(e){this.$emit("error",{state:!0,message:e})},passEditToParent:function(data){this.$emit("edit",data)},passCancelDeleteToParent:function(){this.modal.modal_delete=!1,this.$emit("cancel")},passDeleteToParent:function(data){this.$emit("delete",data)},toggleModalDelete:function(){this.modal.modal_delete=!this.modal.modal_delete},passUpdatePagination:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.pagination.current_page=e,r.next=1,t.processGetData();case 1:case"end":return r.stop()}},r)}))()},setPayloadGet:function(){var e={filter:[{key:"corporate_id",value:this.helper.CORPORATE.id}],pagination:{current_page:this.pagination.current_page,per_page:this.pagination.per_page}};return this.filter.name&&e.filter.push({key:"name",value:this.filter.name}),e},setPayloadDelete:function(){return{id:this.selected.id}},processGetData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark(function t(){var r,data,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.helper.is_error=!1,e.helper.is_loading=!0,t.prev=1,r=e.setPayloadGet(),t.next=2,e.getCorporateDriver(r);case 2:data=t.sent,e.data=data.values,e.pagination.total_data=data.total_values,t.next=4;break;case 3:t.prev=3,n=t.catch(1),console.log(n),e.data=[],e.pagination.total_data=0,e.helper.is_error=!0,e.passErrorToParent(n),e.$utility.setErrorContextSentry(n),e.$sentry.captureMessage(n.message+" at processGetData in TableCorporateDriver");case 4:e.$emit("ready"),e.helper.is_loading=!1;case 5:case"end":return t.stop()}},t,null,[[1,3]])}))()},processDeleteData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark(function t(){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.helper.is_loading=!0,t.prev=1,r=e.setPayloadDelete(),t.next=2,e.deleteCorporateDriver(r);case 2:e.modal.modal_delete=!1,e.processGetData(),t.next=4;break;case 3:t.prev=3,n=t.catch(1),e.passErrorToParent(n),e.$utility.setErrorContextSentry(n),e.$sentry.captureMessage(n.message+" at processDeleteData in TableCorporateDriver");case 4:e.helper.is_loading=!1;case 5:case"end":return t.stop()}},t,null,[[1,3]])}))()}}},c=r(38),component=Object(c.a)(d,function(){var e=this,t=e._self._c;return t("div",[t("content-table-view",{attrs:{length:e.pagination.total_data,is_loading:e.helper.is_loading,is_error:e.helper.is_error,id:"wrapper__"+e.id,test_id:"wrapper__"+e.id}},[t("div",{staticClass:"table-responsive rounded-top table-freeze mb-0"},[t("table",{staticClass:"table table-striped table-borderless mb-0 custom-tbl"},[t("thead",{staticClass:"thead-freeze bg-gray-70"},[t("tr",{staticClass:"border-bottom-table"},[t("th",{staticClass:"text-dark"},[e._v("No")]),e._v(" "),t("th",{staticClass:"text-dark"},[e._v("Nama")]),e._v(" "),t("th",{staticClass:"text-dark"},[e._v("NIK")]),e._v(" "),t("th",{staticClass:"text-dark"},[e._v("\n              No Telp\n            ")]),e._v(" "),t("th",{staticClass:"text-dark"},[e._v("Opsi")])])]),e._v(" "),t("tbody",e._l(e.data,function(r,n){return t("tr",{key:"driver-"+n,class:{"selected-row":e.selected.id===r.id}},[t("td",[e._v("\n              "+e._s(n+10*(e.pagination.current_page-1)+1)+"\n            ")]),e._v(" "),t("td",[e._v("\n              "+e._s(r.name)+"\n            ")]),e._v(" "),t("td",[e._v("\n              "+e._s(r.nik)+"\n            ")]),e._v(" "),t("td",[e._v("\n              "+e._s(r.phone)+"\n            ")]),e._v(" "),t("td",{staticClass:"text-center"},[t("dropdown-button",{ref:"btn-action-"+n,refInFor:!0,attrs:{text:"",size:"sm",variant:"gray",type:"outline",additional_class:"p-0",id:"btn_action_"+n,caret:"font-size-20 bx bx-dots-vertical-rounded",has_custom_action:!0,test_id:e.id+"__tr-"+n+"__btn-option"}},[t("active-button",{attrs:{icon:"bx bx-pencil",icon_size:"16",icon_color:"text-dark",text:"Edit akun",additional_class:"border-0 w-100 text-left  p-2 bg-transparent",align:"rtl",id:e.id+"__tr-"+n+"__btn-edit",test_id:e.id+"__tr-"+n+"__btn-edit"},on:{click:function(t){return e.passEditToParent(r)}}}),e._v(" "),t("active-button",{attrs:{icon:"bx bx-trash",icon_size:"16",icon_color:"text-danger",text_color:"text-danger",text:"Hapus akun",additional_class:"border-0 w-100 text-left  p-2 bg-transparent",align:"rtl",id:e.id+"__tr-"+n+"__btn-delete",test_id:e.id+"__tr-"+n+"__btn-delete"},on:{click:function(t){return e.passDeleteToParent(r)}}})],1)],1)])}),0)])]),e._v(" "),t("div",{staticClass:"w-100"},[t("div",{staticClass:"col-12 text-center text-lg-right"},[t("card-pagination-view",{attrs:{per_page:e.pagination.per_page,total_data:e.pagination.total_data,additional_class:"mt-3",current_page:e.pagination.current_page,id:"pagination_corporate",test_id:e.id+"__pagination"},on:{update:e.passUpdatePagination}})],1)])]),e._v(" "),t("modal-confirmation",{attrs:{is_loading:e.helper.is_loading,text:"Apakah anda yakin untuk menghapus akun driver ini?",submit_button_text:"Submit"},on:{cancel:e.passCancelDeleteToParent,submit:e.processDeleteData},model:{value:e.modal.modal_delete,callback:function(t){e.$set(e.modal,"modal_delete",t)},expression:"modal.modal_delete"}})],1)},[],!1,null,null,null);t.default=component.exports}}]);