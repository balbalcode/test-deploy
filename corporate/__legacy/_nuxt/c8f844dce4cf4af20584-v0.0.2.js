(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{825:function(t,e,r){"use strict";r.r(e);r(70),r(59),r(9);var n=r(1),d=(r(12),r(129),r(72),r(51),r(71),r(112),r(42),r(22),r(429));var l={payment_member:function(){return{"Tanggal Aktivasi/Perpanjang":"date",Nama:"name","Tanggal Lahir":"dob",email:"email","RF ID":"rf_id","No. Kartu":"card_id","Plat Nomor 1":"license_plate","Plat Nomor 2":"second_license_plate",Periode:"period",Kendaraan:"vehicle",Produk:"product_name",Platform:"platform","Nama Pembayar":"billed_name","Email Pembayar":"billed_email","Metode Pembayaran":"payment_method",Referensi:"reference","Waktu Bayar":"paid_date","Bukti Bayar":"payment_receipt",Harga:"price"}}},_={components:{ContentTableView:function(){return r.e(12).then(r.bind(null,833))},ActiveButton:function(){return r.e(0).then(r.bind(null,822))},TextInput:function(){return r.e(10).then(r.bind(null,844))}},data:function(){return{data:{rows:[],total:{}},filter:{key:"",data:[]},helper:{is_loading:!1,is_error:!1,vehicle_map:[]}}},watch:{},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.dispatch("modules/utility/storeUtility/backwardButton",!0),e.next=1,t.$utility.getVehicleMap();case 1:t.helper.vehicle_map=e.sent,t.processGetData();case 2:case"end":return e.stop()}},e)}))()},methods:{getMembershipPaymentDetail:d.paymentMembershipMethods.getMembershipPaymentDetail,passFormatDownloadReport:function(){var t={content:[],header:{}};this.data.rows.length>0&&(t.header=l.payment_member(),t.content=[].concat(this.data.rows)),this.$emit("ready",t)},setPayloadGet:function(){return{spot_id:this.$utility.getSpotId(),id:this.$route.query.id}},formatReportContent:function(t){var e=this;return Array.isArray(t)?t.map(function(t){return Object.assign({},t,{vehicle:e.helper.vehicle_map[""+t.vehicle_code],status:"Aktif"})}):[]},processSearchData:function(){var t=this;""===this.filter.key?this.filter.data=this.data.rows:this.filter.data=this.data.rows.filter(function(e){return e.name.toLowerCase().includes(t.filter.key.toLowerCase())||e.email.toLowerCase().includes(t.filter.key.toLowerCase())||e.license_plate.toLowerCase().includes(t.filter.key.toLowerCase())||e.second_license_plate.toLowerCase().includes(t.filter.key.toLowerCase())||e.rf_id.toLowerCase().includes(t.filter.key.toLowerCase())})},processGetData:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark(function e(){var r,n,data,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.helper.is_loading=!0,t.helper.is_error=!1,e.prev=1,r=t.setPayloadGet(),e.next=2,t.getMembershipPaymentDetail(r);case 2:n=e.sent,data=t.formatReportContent(n.members),t.data.rows=data,t.filter.data=data,e.next=4;break;case 3:e.prev=3,d=e.catch(1),t.data={rows:[],total:{}},t.helper.is_error=!0,t.$utility.setErrorContextSentry(d),t.$sentry.captureMessage(d.message+" at processGetData in TablePaymentMember");case 4:t.passFormatDownloadReport(),t.helper.is_loading=!1;case 5:case"end":return e.stop()}},e,null,[[1,3]])}))()}}},c=r(38),component=Object(c.a)(_,function(){var t=this,e=t._self._c;return e("div",[e("content-table-view",{ref:"wrapper__table-membership-report",attrs:{length:t.filter.data.length,is_loading:t.helper.is_loading,is_error:t.helper.is_error,"loading-caption":"Laporan belum tersedia",test_id:"wrapper__table-membership-report"},on:{reload:t.processGetData}},[e("div",{staticClass:"d-flex w-full w-100 justify-content-end my-2"},[e("div",{},[e("text-input",{attrs:{placeholder:"Cari Data",id:"input-filter__"+t.id,test_id:"input-filter__"+t.id},on:{submit:t.processSearchData},model:{value:t.filter.key,callback:function(e){t.$set(t.filter,"key",e)},expression:"filter.key"}})],1),t._v(" "),e("div",[e("active-button",{attrs:{id:"btn-close_update_modal_version",additional_class:"ml-1",text:"Cari",align:"rtl",icon:"ic-search-md",test_id:"btn-close_update_modal_version"},on:{click:t.processSearchData}})],1)]),t._v(" "),e("div",{staticClass:"table-responsive rounded-top mb-0"},[e("table",{staticClass:"d-block table table-striped table-sticky-header report-table",attrs:{"data-testid":"table-membership-report"}},[e("thead",{staticClass:"thead-primary"},[e("tr",[e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-number"}},[t._v("\n              No\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-date"}},[t._v("\n              Tanggal Aktivasi/Perpanjang\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-name"}},[t._v("\n              Nama\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-email"}},[t._v("\n              Email\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-dob"}},[t._v("\n              Tanggal Lahir\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-card_id"}},[t._v("\n              Nomor Kartu\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-RF_id"}},[t._v("\n              RF ID\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-license_plate"}},[t._v("\n              Plat Nomor 1\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-second_license_plate"}},[t._v("\n              Plat Nomor 2\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-period"}},[t._v("\n              Periode\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-product"}},[t._v("\n              Produk\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-platform"}},[t._v("\n              Platform\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-billed_name"}},[t._v("\n              Nama Pembayar\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-billed_email"}},[t._v("\n              Email Pembayar\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-payment_method"}},[t._v("\n              Metode Pembayaran\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-payment_reference"}},[t._v("\n              Referensi\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-paid_date"}},[t._v("\n              Waktu Bayar\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-payment_receipt"}},[t._v("\n              Bukti Transfer\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-status"}},[t._v("\n              Status\n            ")]),t._v(" "),e("th",{staticClass:"cell-sticky",staticStyle:{top:"1px"},attrs:{"data-testid":"th-price"}},[t._v("\n              Harga\n            ")])])]),t._v(" "),e("tbody",t._l(t.filter.data,function(r,n){return e("tr",{key:n},[e("td",{attrs:{"data-testid":"tr-"+n+"__td-number"}},[t._v(t._s(n+1))]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-date"}},[t._v(t._s(r.date))]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-name"}},[t._v(t._s(r.name))]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-email"}},[t._v(t._s(r.email))]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-dob"}},[t._v(t._s(r.dob))]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-card_id"}},[t._v("\n              "+t._s(r.card_id)+"\n            ")]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-rf_id"}},[t._v("\n              "+t._s(r.rf_id)+"\n            ")]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-license_plate"}},[t._v("\n              "+t._s(r.license_plate)+"\n            ")]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-second_license_plate"}},[t._v("\n              "+t._s(r.second_license_plate)+"\n            ")]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-period"}},[t._v(t._s(r.period))]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-product"}},[t._v("\n              "+t._s(r.product)+"\n            ")]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-platform"}},[t._v("\n              "+t._s(r.platform)+"\n            ")]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-billed_name"}},[t._v("\n              "+t._s(r.billed_name)+"\n            ")]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-billed_email"}},[t._v("\n              "+t._s(r.billed_email)+"\n            ")]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-payment_method"}},[t._v("\n              "+t._s(r.payment_method)+"\n            ")]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-payment_reference"}},[t._v("\n              "+t._s(r.payment_reference)+"\n            ")]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-paid_date"}},[t._v("\n              "+t._s(r.paid_date)+"\n            ")]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-payment_receipt"}},[t._v("\n              "+t._s(r.payment_receipt)+"\n            ")]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-status"}},[t._v(t._s(r.status))]),t._v(" "),e("td",{attrs:{"data-testid":"tr-"+n+"__td-price"}},[t._v(t._s(r.price))])])}),0)])])])],1)},[],!1,null,null,null);e.default=component.exports}}]);