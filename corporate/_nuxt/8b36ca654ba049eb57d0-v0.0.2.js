(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{592:function(t,n,e){"use strict";e.r(n),e.d(n,"addTracingExtensions",function(){return c.a}),e.d(n,"startIdleTransaction",function(){return c.b}),e.d(n,"IdleTransaction",function(){return o.a}),e.d(n,"TRACING_DEFAULTS",function(){return o.b}),e.d(n,"Span",function(){return span.a}),e.d(n,"Transaction",function(){return f.a}),e.d(n,"extractTraceparentData",function(){return d.a}),e.d(n,"getActiveTransaction",function(){return d.b}),e.d(n,"SpanStatus",function(){return l.a}),e.d(n,"getSpanStatusFromHttpCode",function(){return l.b}),e.d(n,"setHttpStatus",function(){return l.c}),e.d(n,"spanStatusfromHttpCode",function(){return l.d}),e.d(n,"continueTrace",function(){return h.a}),e.d(n,"getActiveSpan",function(){return h.b}),e.d(n,"startActiveSpan",function(){return h.d}),e.d(n,"startInactiveSpan",function(){return h.e}),e.d(n,"startSpan",function(){return h.f}),e.d(n,"startSpanManual",function(){return h.g}),e.d(n,"trace",function(){return h.h}),e.d(n,"getDynamicSamplingContextFromClient",function(){return m.a}),e.d(n,"getDynamicSamplingContextFromSpan",function(){return m.b}),e.d(n,"setMeasurement",function(){return v.a}),e.d(n,"isValidSampleRate",function(){return _.a}),e.d(n,"SEMANTIC_ATTRIBUTE_PROFILE_ID",function(){return O.a}),e.d(n,"SEMANTIC_ATTRIBUTE_SENTRY_OP",function(){return O.b}),e.d(n,"SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN",function(){return O.c}),e.d(n,"SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE",function(){return O.d}),e.d(n,"SEMANTIC_ATTRIBUTE_SENTRY_SOURCE",function(){return O.e}),e.d(n,"createEventEnvelope",function(){return E.a}),e.d(n,"createSessionEnvelope",function(){return E.b}),e.d(n,"addBreadcrumb",function(){return S.a}),e.d(n,"captureCheckIn",function(){return S.b}),e.d(n,"captureEvent",function(){return S.c}),e.d(n,"captureException",function(){return S.d}),e.d(n,"captureMessage",function(){return S.e}),e.d(n,"captureSession",function(){return S.f}),e.d(n,"close",function(){return S.g}),e.d(n,"configureScope",function(){return S.h}),e.d(n,"endSession",function(){return S.i}),e.d(n,"flush",function(){return S.j}),e.d(n,"getClient",function(){return S.k}),e.d(n,"getCurrentScope",function(){return S.l}),e.d(n,"isInitialized",function(){return S.m}),e.d(n,"lastEventId",function(){return S.n}),e.d(n,"setContext",function(){return S.o}),e.d(n,"setExtra",function(){return S.p}),e.d(n,"setExtras",function(){return S.q}),e.d(n,"setTag",function(){return S.r}),e.d(n,"setTags",function(){return S.s}),e.d(n,"setUser",function(){return S.t}),e.d(n,"startSession",function(){return S.u}),e.d(n,"startTransaction",function(){return S.v}),e.d(n,"withActiveSpan",function(){return S.w}),e.d(n,"withIsolationScope",function(){return S.x}),e.d(n,"withMonitor",function(){return S.y}),e.d(n,"withScope",function(){return S.z}),e.d(n,"Hub",function(){return y.a}),e.d(n,"ensureHubOnCarrier",function(){return y.b}),e.d(n,"getCurrentHub",function(){return y.c}),e.d(n,"getHubFromCarrier",function(){return y.d}),e.d(n,"getIsolationScope",function(){return y.e}),e.d(n,"getMainCarrier",function(){return y.f}),e.d(n,"makeMain",function(){return y.g}),e.d(n,"runWithAsyncContext",function(){return y.h}),e.d(n,"setAsyncContextStrategy",function(){return y.i}),e.d(n,"setHubOnCarrier",function(){return y.j}),e.d(n,"closeSession",function(){return T.a}),e.d(n,"makeSession",function(){return T.b}),e.d(n,"updateSession",function(){return T.c}),e.d(n,"SessionFlusher",function(){return j.a}),e.d(n,"Scope",function(){return I.a}),e.d(n,"getGlobalScope",function(){return I.b}),e.d(n,"setGlobalScope",function(){return I.c}),e.d(n,"addGlobalEventProcessor",function(){return k.a}),e.d(n,"notifyEventProcessors",function(){return k.c}),e.d(n,"getEnvelopeEndpointWithUrlEncodedAuth",function(){return w.a}),e.d(n,"getReportDialogEndpoint",function(){return w.b}),e.d(n,"BaseClient",function(){return M.a}),e.d(n,"addEventProcessor",function(){return M.b}),e.d(n,"ServerRuntimeClient",function(){return $.a}),e.d(n,"initAndBind",function(){return A.a}),e.d(n,"setCurrentClient",function(){return A.b}),e.d(n,"createTransport",function(){return base.a}),e.d(n,"makeOfflineTransport",function(){return C.a}),e.d(n,"makeMultiplexedTransport",function(){return x.a}),e.d(n,"SDK_VERSION",function(){return F.a}),e.d(n,"addIntegration",function(){return R.a}),e.d(n,"convertIntegrationFnToClass",function(){return R.c}),e.d(n,"defineIntegration",function(){return R.d}),e.d(n,"getIntegrationsToSetup",function(){return R.e}),e.d(n,"applyScopeDataToEvent",function(){return D.a}),e.d(n,"mergeScopeData",function(){return D.b}),e.d(n,"prepareEvent",function(){return U.b}),e.d(n,"createCheckInEnvelope",function(){return N.a}),e.d(n,"createSpanEnvelope",function(){return P.a}),e.d(n,"hasTracingEnabled",function(){return W.a}),e.d(n,"isSentryRequestUrl",function(){return H.a}),e.d(n,"handleCallbackErrors",function(){return z.a}),e.d(n,"parameterize",function(){return B.a}),e.d(n,"spanIsSampled",function(){return L.c}),e.d(n,"spanToJSON",function(){return L.e}),e.d(n,"spanToTraceContext",function(){return L.f}),e.d(n,"spanToTraceHeader",function(){return L.g}),e.d(n,"getRootSpan",function(){return G.a}),e.d(n,"applySdkMetadata",function(){return J.a}),e.d(n,"DEFAULT_ENVIRONMENT",function(){return V.a}),e.d(n,"ModuleMetadata",function(){return et}),e.d(n,"moduleMetadataIntegration",function(){return nt}),e.d(n,"RequestData",function(){return at}),e.d(n,"requestDataIntegration",function(){return ut}),e.d(n,"InboundFilters",function(){return st.a}),e.d(n,"inboundFiltersIntegration",function(){return st.b}),e.d(n,"FunctionToString",function(){return ft.a}),e.d(n,"functionToStringIntegration",function(){return ft.b}),e.d(n,"LinkedErrors",function(){return mt}),e.d(n,"linkedErrorsIntegration",function(){return gt}),e.d(n,"metrics",function(){return kt}),e.d(n,"Integrations",function(){return wt});var r={};e.r(r),e.d(r,"FunctionToString",function(){return ft.a}),e.d(r,"InboundFilters",function(){return st.a}),e.d(r,"LinkedErrors",function(){return mt});var c=e(659),o=e(663),span=e(661),f=e(660),d=e(622),l=e(603),h=e(600),m=e(212),v=e(701),_=e(679),O=e(602),E=e(656),S=e(166),y=e(20),T=e(60),j=e(681),I=e(93),k=e(107),w=e(621),M=e(655),$=e(702),A=e(677),base=e(697),C=e(704),x=e(705),F=e(213),R=e(596),D=e(108),U=e(214),N=e(682),P=e(706),W=e(658),H=e(707),z=e(678),B=e(708),L=e(63),G=e(130),J=e(698),V=e(82),Y=e(742),K=e(26);const Q=new Map,X=new Set;function Z(t,n){return function(t){if(K.a._sentryModuleMetadata)for(const n of Object.keys(K.a._sentryModuleMetadata)){const e=K.a._sentryModuleMetadata[n];if(X.has(n))continue;X.add(n);const r=t(n);for(const t of r.reverse())if(t.filename){Q.set(t.filename,e);break}}}(t),Q.get(n)}const tt="ModuleMetadata",nt=Object(R.d)(()=>({name:tt,setupOnce(){},setup(t){"function"==typeof t.on&&t.on("beforeEnvelope",t=>{Object(Y.g)(t,(t,n)=>{if("event"===n){const n=Array.isArray(t)?t[1]:void 0;n&&(!function(t){try{t.exception.values.forEach(t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[])delete n.module_metadata})}catch(t){}}(n),t[1]=n)}})})},processEvent:(t,n,e)=>(function(t,n){try{n.exception.values.forEach(n=>{if(n.stacktrace)for(const e of n.stacktrace.frames||[]){if(!e.filename)continue;const n=Z(t,e.filename);n&&(e.module_metadata=n)}})}catch(t){}}(e.getOptions().stackParser,t),t)})),et=Object(R.c)(tt,nt);var it=e(801);const ct={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},ot="RequestData",ut=Object(R.d)((t={})=>{const n=it.a,e={...ct,...t,include:{method:!0,...ct.include,...t.include,user:t.include&&"boolean"==typeof t.include.user?t.include.user:{...ct.include.user,...(t.include||{}).user}}};return{name:ot,setupOnce(){},processEvent(t,r,c){const{transactionNamingScheme:o}=e,{sdkProcessingMetadata:f={}}=t,d=f.request;if(!d)return t;const l=f.requestDataOptionsFromExpressHandler||f.requestDataOptionsFromGCPWrapper||function(t){const{transactionNamingScheme:n,include:{ip:e,user:r,...c}}=t,o=[];for(const[t,n]of Object.entries(c))n&&o.push(t);let f;if(void 0===r)f=!0;else if("boolean"==typeof r)f=r;else{const t=[];for(const[n,e]of Object.entries(r))e&&t.push(n);f=t}return{include:{ip:e,user:f,request:0!==o.length?o:void 0,transaction:n}}}(e),h=n(t,d,l);if("transaction"===t.type||"handler"===o)return h;const m=d._sentryTransaction;if(m){const t=Object(L.e)(m).description||"",n="sentry.javascript.nextjs"===function(t){try{return t.getOptions()._metadata.sdk.name}catch(t){return}}(c)?t.startsWith("/api"):"path"!==o,[e]=Object(it.b)(d,{path:!0,method:n,customRoute:t});h.transaction=e}return h}}}),at=Object(R.c)(ot,ut);var st=e(619),ft=e(620),lt=e(795),pt=e(800);const ht="LinkedErrors",gt=Object(R.d)((t={})=>{const n=t.limit||5,e=t.key||"cause";return{name:ht,setupOnce(){},preprocessEvent(t,r,c){const o=c.getOptions();Object(lt.a)(pt.c,o.stackParser,o.maxValueLength,e,n,t,r)}}}),mt=Object(R.c)(ht,gt);var bt=e(29),vt=e(49),_t=e(664),time=e(84),Ot=e(703),Et=e(662),St=e(657);class yt{constructor(t){this._client=t,this._buckets=new Map,this._interval=setInterval(()=>this.flush(),_t.b)}add(t,n,e,r="none",c={},o=Object(time.c)()){const f=Math.floor(o),d=Object(St.b)(n),l=Object(St.c)(c),h=Object(St.d)(r),m=Object(St.a)(t,d,h,l);let v=this._buckets.get(m);const _=v&&t===_t.g?v.metric.weight:0;v?(v.metric.add(e),v.timestamp<f&&(v.timestamp=f)):(v={metric:new Ot.a[t](e),timestamp:f,metricType:t,name:d,unit:h,tags:l},this._buckets.set(m,v));const O="string"==typeof e?v.metric.weight-_:e;Object(Et.b)(t,d,O,h,c,m)}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const t=Array.from(this._buckets).map(([,t])=>t);this._client.captureAggregateMetrics(t)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const Tt="MetricsAggregator",jt=Object(R.d)(()=>({name:Tt,setupOnce(){},setup(t){t.metricsAggregator=new yt(t)}}));function It(t,n,e,data={}){const r=Object(S.k)(),c=Object(S.l)();if(r){if(!r.metricsAggregator)return void(vt.a&&bt.c.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:o,tags:f,timestamp:d}=data,{release:l,environment:h}=r.getOptions(),m=c.getTransaction(),v={};l&&(v.release=l),h&&(v.environment=h),m&&(v.transaction=Object(L.e)(m).description||""),vt.a&&bt.c.log(`Adding value of ${e} to ${t} metric ${n}`),r.metricsAggregator.add(t,n,e,o,{...v,...f},d)}}const kt={increment:function(t,n=1,data){It(_t.a,t,n,data)},distribution:function(t,n,data){It(_t.d,t,n,data)},set:function(t,n,data){It(_t.g,t,n,data)},gauge:function(t,n,data){It(_t.e,t,n,data)},MetricsAggregator:Object(R.c)(Tt,jt),metricsAggregatorIntegration:jt},wt=r},596:function(t,n,e){"use strict";e.d(n,"a",function(){return E}),e.d(n,"b",function(){return _}),e.d(n,"c",function(){return S}),e.d(n,"d",function(){return y}),e.d(n,"e",function(){return m}),e.d(n,"f",function(){return O}),e.d(n,"g",function(){return v});var r=e(17),c=e(29),o=e(49),f=e(107),d=e(166),l=e(20);const h=[];function m(t){const n=t.defaultIntegrations||[],e=t.integrations;let c;n.forEach(t=>{t.isDefaultInstance=!0}),c=Array.isArray(e)?[...n,...e]:"function"==typeof e?Object(r.c)(e(n)):n;const o=function(t){const n={};return t.forEach(t=>{const{name:e}=t,r=n[e];r&&!r.isDefaultInstance&&t.isDefaultInstance||(n[e]=t)}),Object.keys(n).map(t=>n[t])}(c),f=function(t,n){for(let i=0;i<t.length;i++)if(!0===n(t[i]))return i;return-1}(o,t=>"Debug"===t.name);if(-1!==f){const[t]=o.splice(f,1);o.push(t)}return o}function v(t,n){const e={};return n.forEach(n=>{n&&O(t,n,e)}),e}function _(t,n){for(const e of n)e&&e.afterAllSetup&&e.afterAllSetup(t)}function O(t,n,e){if(e[n.name])o.a&&c.c.log(`Integration skipped because it was already installed: ${n.name}`);else{if(e[n.name]=n,-1===h.indexOf(n.name)&&(n.setupOnce(f.a,l.c),h.push(n.name)),n.setup&&"function"==typeof n.setup&&n.setup(t),t.on&&"function"==typeof n.preprocessEvent){const e=n.preprocessEvent.bind(n);t.on("preprocessEvent",(n,r)=>e(n,r,t))}if(t.addEventProcessor&&"function"==typeof n.processEvent){const e=n.processEvent.bind(n),r=(n,r)=>e(n,r,t);r.id=n.name,t.addEventProcessor(r)}o.a&&c.c.log(`Integration installed: ${n.name}`)}}function E(t){const n=Object(d.k)();n&&n.addIntegration?n.addIntegration(t):o.a&&c.c.warn(`Cannot add integration "${t.name}" because no SDK Client is available.`)}function S(t,n){const e=function(...t){return n(...t)};return e.id=t,e}function y(t){return t}},619:function(t,n,e){"use strict";e.d(n,"a",function(){return _}),e.d(n,"b",function(){return v});var r=e(29),c=e(17),o=e(61),f=e(49),d=e(596);const l=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],h=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],m="InboundFilters",v=Object(d.d)((t={})=>({name:m,setupOnce(){},processEvent(n,e,d){const m=d.getOptions(),v=function(t={},n={}){return{allowUrls:[...t.allowUrls||[],...n.allowUrls||[]],denyUrls:[...t.denyUrls||[],...n.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...n.ignoreErrors||[],...t.disableErrorDefaults?[]:l],ignoreTransactions:[...t.ignoreTransactions||[],...n.ignoreTransactions||[],...t.disableTransactionDefaults?[]:h],ignoreInternal:void 0===t.ignoreInternal||t.ignoreInternal}}(t,m);return function(t,n){if(n.ignoreInternal&&function(t){try{return"SentryError"===t.exception.values[0].type}catch(t){}return!1}(t))return f.a&&r.c.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Object(c.e)(t)}`),!0;if(function(t,n){if(t.type||!n||!n.length)return!1;return function(t){const n=[];t.message&&n.push(t.message);let e;try{e=t.exception.values[t.exception.values.length-1]}catch(t){}e&&e.value&&(n.push(e.value),e.type&&n.push(`${e.type}: ${e.value}`));f.a&&0===n.length&&r.c.error(`Could not extract message for event ${Object(c.e)(t)}`);return n}(t).some(t=>Object(o.c)(t,n))}(t,n.ignoreErrors))return f.a&&r.c.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Object(c.e)(t)}`),!0;if(function(t,n){if("transaction"!==t.type||!n||!n.length)return!1;const e=t.transaction;return!!e&&Object(o.c)(e,n)}(t,n.ignoreTransactions))return f.a&&r.c.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Object(c.e)(t)}`),!0;if(function(t,n){if(!n||!n.length)return!1;const e=O(t);return!!e&&Object(o.c)(e,n)}(t,n.denyUrls))return f.a&&r.c.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Object(c.e)(t)}.\nUrl: ${O(t)}`),!0;if(!function(t,n){if(!n||!n.length)return!0;const e=O(t);return!e||Object(o.c)(e,n)}(t,n.allowUrls))return f.a&&r.c.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Object(c.e)(t)}.\nUrl: ${O(t)}`),!0;return!1}(n,v)?null:n}})),_=Object(d.c)(m,v);function O(t){try{let n;try{n=t.exception.values[0].stacktrace.frames}catch(t){}return n?function(t=[]){for(let i=t.length-1;i>=0;i--){const n=t[i];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(n):null}catch(n){return f.a&&r.c.error(`Cannot extract url for event ${Object(c.e)(t)}`),null}}},620:function(t,n,e){"use strict";e.d(n,"a",function(){return m}),e.d(n,"b",function(){return h});var r=e(52),c=e(166),o=e(596);let f;const d="FunctionToString",l=new WeakMap,h=Object(o.d)(()=>({name:d,setupOnce(){f=Function.prototype.toString;try{Function.prototype.toString=function(...t){const n=Object(r.f)(this),e=l.has(Object(c.k)())&&void 0!==n?n:this;return f.apply(e,t)}}catch(t){}},setup(t){l.set(t,!0)}})),m=Object(o.c)(d,h)},657:function(t,n,e){"use strict";e.d(n,"a",function(){return c}),e.d(n,"b",function(){return l}),e.d(n,"c",function(){return _}),e.d(n,"d",function(){return d}),e.d(n,"e",function(){return f}),e.d(n,"f",function(){return o});var r=e(52);function c(t,n,e,c){return`${t}${n}${e}${Object.entries(Object(r.c)(c)).sort((a,b)=>a[0].localeCompare(b[0]))}`}function o(s){let t=0;for(let i=0;i<s.length;i++){t=(t<<5)-t+s.charCodeAt(i),t&=t}return t>>>0}function f(t){let n="";for(const e of t){const t=Object.entries(e.tags),r=t.length>0?`|#${t.map(([t,n])=>`${t}:${n}`).join(",")}`:"";n+=`${e.name}@${e.unit}:${e.metric}|${e.metricType}${r}|T${e.timestamp}\n`}return n}function d(t){return t.replace(/[^\w]+/gi,"_")}function l(t){return t.replace(/[^\w\-.]+/gi,"_")}function h(t){return t.replace(/[^\w\-./]+/gi,"")}const m=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function v(t){return[...t].reduce((t,n)=>t+function(input){for(const[t,n]of m)if(input===t)return n;return input}(n),"")}function _(t){const n={};for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){n[h(e)]=v(String(t[e]))}return n}},662:function(t,n,e){"use strict";e.d(n,"a",function(){return d}),e.d(n,"b",function(){return l});var r=e(52),c=e(600);let o;function f(span){return o?o.get(span):void 0}function d(span){const t=f(span);if(!t)return;const output={};for(const[,[n,summary]]of t)output[n]||(output[n]=[]),output[n].push(Object(r.c)(summary));return output}function l(t,n,e,r,d,l){const span=Object(c.b)();if(span){const c=f(span)||new Map,h=`${t}:${n}@${r}`,m=c.get(l);if(m){const[,summary]=m;c.set(l,[h,{min:Math.min(summary.min,e),max:Math.max(summary.max,e),count:summary.count+=1,sum:summary.sum+=e,tags:summary.tags}])}else c.set(l,[h,{min:e,max:e,count:1,sum:e,tags:d}]);o||(o=new WeakMap),o.set(span,c)}}},664:function(t,n,e){"use strict";e.d(n,"a",function(){return r}),e.d(n,"b",function(){return d}),e.d(n,"c",function(){return l}),e.d(n,"d",function(){return f}),e.d(n,"e",function(){return c}),e.d(n,"f",function(){return h}),e.d(n,"g",function(){return o});const r="c",c="g",o="s",f="d",d=5e3,l=1e4,h=1e4},703:function(t,n,e){"use strict";e.d(n,"a",function(){return o});var r=e(664),c=e(657);const o={[r.a]:class{constructor(t){this._value=t}get weight(){return 1}add(t){this._value+=t}toString(){return`${this._value}`}},[r.e]:class{constructor(t){this._last=t,this._min=t,this._max=t,this._sum=t,this._count=1}get weight(){return 5}add(t){this._last=t,t<this._min&&(this._min=t),t>this._max&&(this._max=t),this._sum+=t,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},[r.d]:class{constructor(t){this._value=[t]}get weight(){return this._value.length}add(t){this._value.push(t)}toString(){return this._value.join(":")}},[r.g]:class{constructor(t){this.first=t,this._value=new Set([t])}get weight(){return this._value.size}add(t){this._value.add(t)}toString(){return Array.from(this._value).map(t=>"string"==typeof t?Object(c.f)(t):t).join(":")}}}},744:function(t,n,e){"use strict";e.d(n,"a",function(){return f});var r=e(743),c=e(742),o=e(657);function f(t,n,e,f){const d={sent_at:(new Date).toISOString()};e&&e.sdk&&(d.sdk={name:e.sdk.name,version:e.sdk.version}),f&&n&&(d.dsn=Object(r.b)(n));const l=function(t){const n=Object(o.e)(t);return[{type:"statsd",length:n.length},n]}(t);return Object(c.c)(d,[l])}},745:function(t,n,e){"use strict";e.d(n,"a",function(){return l});var r=e(84),c=e(664),o=e(703),f=e(662),d=e(657);class l{constructor(t){this._client=t,this._buckets=new Map,this._bucketsTotalWeight=0,this._interval=setInterval(()=>this._flush(),c.c),this._interval.unref&&this._interval.unref(),this._flushShift=Math.floor(Math.random()*c.c/1e3),this._forceFlush=!1}add(t,n,e,l="none",h={},m=Object(r.c)()){const v=Math.floor(m),_=Object(d.b)(n),O=Object(d.c)(h),E=Object(d.d)(l),S=Object(d.a)(t,_,E,O);let y=this._buckets.get(S);const T=y&&t===c.g?y.metric.weight:0;y?(y.metric.add(e),y.timestamp<v&&(y.timestamp=v)):(y={metric:new o.a[t](e),timestamp:v,metricType:t,name:_,unit:E,tags:O},this._buckets.set(S,y));const j="string"==typeof e?y.metric.weight-T:e;Object(f.b)(t,_,j,E,h,S),this._bucketsTotalWeight+=y.metric.weight,this._bucketsTotalWeight>=c.f&&this.flush()}flush(){this._forceFlush=!0,this._flush()}close(){this._forceFlush=!0,clearInterval(this._interval),this._flush()}_flush(){if(this._forceFlush)return this._forceFlush=!1,this._bucketsTotalWeight=0,this._captureMetrics(this._buckets),void this._buckets.clear();const t=Math.floor(Object(r.c)())-c.c/1e3-this._flushShift,n=new Map;for(const[e,r]of this._buckets)r.timestamp<=t&&(n.set(e,r),this._bucketsTotalWeight-=r.metric.weight);for(const[t]of n)this._buckets.delete(t);this._captureMetrics(n)}_captureMetrics(t){if(t.size>0&&this._client.captureAggregateMetrics){const n=Array.from(t).map(([,t])=>t);this._client.captureAggregateMetrics(n)}}}}}]);